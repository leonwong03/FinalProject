{"ast":null,"code":"var _jsxFileName = \"/Users/leon/Development/Deli-Vape-Project/Client/src/containers/ProductContainer.js\";\nimport React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { detailsProduct, saveProductReview } from '../actions/productActions';\nimport Rating from '../components/products/Rating';\nimport { addToCart } from '../actions/cartActions';\n\nconst ProductContainer = props => {\n  const dispatch = useDispatch();\n  const [qty, setQty] = useState(1);\n  const [rating, setRating] = useState(0);\n  const [comment, setComment] = useState('');\n  const {\n    userInfo\n  } = useSelector(state => state.user);\n  const productDetails = useSelector(state => state.products);\n  const {\n    product,\n    success: productSaveSuccess\n  } = productDetails;\n  useEffect(() => {\n    if (productSaveSuccess) {\n      setRating(1);\n      setComment('');\n      productDetails.success = false;\n    }\n\n    dispatch(detailsProduct(props.match.params.id));\n    return () => {//\n    };\n  }, [dispatch, productDetails.success, productSaveSuccess, qty, props.match.params.id]);\n\n  const submitHandler = e => {\n    e.preventDefault();\n    dispatch(saveProductReview(props.match.params.id, {\n      name: userInfo.user.first_name + ' ' + userInfo.user.last_name,\n      rating: rating,\n      comment: comment\n    }));\n  };\n\n  const handleAddToCart = () => {\n    dispatch(addToCart(product, qty));\n    props.history.push('/cart');\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"back-to-results\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }, \"Back to results\")), !product.id ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }, \"Loading...\") : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"details-image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: product.image,\n    alt: product.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"details-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 19\n    }\n  }, product.name)), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"#reviews\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Rating, {\n    value: product.rating,\n    text: product.numReviews + ' Reviews',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }\n  }, \"Price:\", /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 25\n    }\n  }, \" $\", product.price)), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  }, \"Description:\", /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 19\n    }\n  }, product.description)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"details-action\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 17\n    }\n  }, \"Price: $\", product.price), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 17\n    }\n  }, \"Status: \", product.countInStock > 0 ? 'In Stock' : 'Out of Stock'), product.countInStock > 0 ? /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 19\n    }\n  }, \"Qty:\", ' ', /*#__PURE__*/React.createElement(\"select\", {\n    value: qty,\n    onChange: e => {\n      setQty(Number(e.target.value));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 21\n    }\n  }, [...Array(product.countInStock).keys()].map(x => /*#__PURE__*/React.createElement(\"option\", {\n    key: x + 1,\n    value: x + 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 25\n    }\n  }, x + 1)))) : /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 17\n    }\n  }, product.countInStock > 0 ? /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleAddToCart,\n    className: \"button primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 21\n    }\n  }, \"Add To Cart\") : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 21\n    }\n  }))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-margined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }\n  }, \"Reviews\"), !product.reviews ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 15\n    }\n  }, \"There are no reviews\") : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"review\",\n    id: \"reviews\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 17\n    }\n  }, product.reviews.map(review => /*#__PURE__*/React.createElement(\"li\", {\n    key: review.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 23\n    }\n  }, review.name, \" - \", review.created_at.substring(0, 10)), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(Rating, {\n    value: review.rating,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 23\n    }\n  }, review.comment))), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 21\n    }\n  }, \"Add A Review\"), userInfo ? /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: submitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"form-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"rating\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 29\n    }\n  }, \"Rating\"), /*#__PURE__*/React.createElement(\"select\", {\n    name: \"rating\",\n    id: \"rating\",\n    value: rating,\n    onChange: e => setRating(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 31\n    }\n  }, \"1 - Poor\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 31\n    }\n  }, \"2 - Fair\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 31\n    }\n  }, \"3 - Good\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 31\n    }\n  }, \"4 - Very Good\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 31\n    }\n  }, \"5 - Excellent\"))), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"comment\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 29\n    }\n  }, \"Comment\"), /*#__PURE__*/React.createElement(\"textarea\", {\n    name: \"comment\",\n    value: comment,\n    onChange: e => setComment(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"button primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 29\n    }\n  }, \"Submit Comment\")))) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 23\n    }\n  }, \"Please \", /*#__PURE__*/React.createElement(Link, {\n    to: \"/signin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 32\n    }\n  }, \"Sign In\"), \" to write a review.\")))))));\n};\n\nexport default ProductContainer;","map":{"version":3,"sources":["/Users/leon/Development/Deli-Vape-Project/Client/src/containers/ProductContainer.js"],"names":["React","useEffect","useState","useSelector","useDispatch","Link","detailsProduct","saveProductReview","Rating","addToCart","ProductContainer","props","dispatch","qty","setQty","rating","setRating","comment","setComment","userInfo","state","user","productDetails","products","product","success","productSaveSuccess","match","params","id","submitHandler","e","preventDefault","name","first_name","last_name","handleAddToCart","history","push","image","numReviews","price","description","countInStock","Number","target","value","Array","keys","map","x","reviews","review","created_at","substring"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { detailsProduct, saveProductReview } from '../actions/productActions';\nimport Rating from '../components/products/Rating';\nimport { addToCart } from '../actions/cartActions';\n\nconst ProductContainer = props => {\n  const dispatch = useDispatch();\n  const [qty, setQty] = useState(1);\n  const [rating, setRating] = useState(0);\n  const [comment, setComment] = useState('');\n  const { userInfo } = useSelector(state => state.user);\n  const productDetails = useSelector(state => state.products);\n  const { product, success: productSaveSuccess } = productDetails;\n\n  useEffect(() => {\n    if (productSaveSuccess) {\n      setRating(1);\n      setComment('');\n      productDetails.success = false;\n    }\n    dispatch(detailsProduct(props.match.params.id));\n    return () => {\n      //\n    };\n  }, [dispatch, productDetails.success, productSaveSuccess, qty, props.match.params.id]);\n\n  const submitHandler = e => {\n    e.preventDefault();\n    dispatch(\n      saveProductReview(props.match.params.id, {\n        name: userInfo.user.first_name + ' ' + userInfo.user.last_name,\n        rating: rating,\n        comment: comment,\n      })\n    );\n  };\n\n  const handleAddToCart = () => {\n    dispatch(addToCart(product, qty));\n    props.history.push('/cart');\n  };\n\n  return (\n    <div>\n      <div className='back-to-results'>\n        <Link to='/'>Back to results</Link>\n      </div>\n\n      {!product.id ? (\n        <div>Loading...</div>\n      ) : (\n        <>\n          <div className='details'>\n            <div className='details-image'>\n              <img src={product.image} alt={product.name} />\n            </div>\n            <div className='details-info'>\n              <ul>\n                <li>\n                  <h4>{product.name}</h4>\n                </li>\n                <li>\n                  <a href='#reviews'>\n                    <Rating value={product.rating} text={product.numReviews + ' Reviews'} />\n                  </a>\n                </li>\n                <li>\n                  Price:<b> ${product.price}</b>\n                </li>\n                <li>\n                  Description:\n                  <div>{product.description}</div>\n                </li>\n              </ul>\n            </div>\n            <div className='details-action'>\n              <ul>\n                <li>Price: ${product.price}</li>\n                <li>Status: {product.countInStock > 0 ? 'In Stock' : 'Out of Stock'}</li>\n                {product.countInStock > 0 ? (\n                  <li>\n                    Qty:{' '}\n                    <select\n                      value={qty}\n                      onChange={e => {\n                        setQty(Number(e.target.value));\n                      }}>\n                      {[...Array(product.countInStock).keys()].map(x => (\n                        <option key={x + 1} value={x + 1}>\n                          {x + 1}\n                        </option>\n                      ))}\n                    </select>\n                  </li>\n                ) : (\n                  <li></li>\n                )}\n                <li>\n                  {product.countInStock > 0 ? (\n                    <button onClick={handleAddToCart} className='button primary'>\n                      Add To Cart\n                    </button>\n                  ) : (\n                    <div></div>\n                  )}\n                </li>\n              </ul>\n            </div>\n          </div>\n          <div className='content-margined'>\n            <hr />\n            <h2>Reviews</h2>\n            {!product.reviews ? (\n              <div>There are no reviews</div>\n            ) : (\n              <div>\n                <ul className='review' id='reviews'>\n                  {product.reviews.map(review => (\n                    <li key={review.id}>\n                      <div>\n                        {review.name} - {review.created_at.substring(0, 10)}\n                      </div>\n\n                      <div>\n                        <Rating value={review.rating} />\n                      </div>\n                      <div>{review.comment}</div>\n                    </li>\n                  ))}\n                  <li>\n                    <h3>Add A Review</h3>\n                    {userInfo ? (\n                      <form onSubmit={submitHandler}>\n                        <ul className='form-container'>\n                          <li>\n                            <label htmlFor='rating'>Rating</label>\n                            <select name='rating' id='rating' value={rating} onChange={e => setRating(e.target.value)}>\n                              <option value='1'>1 - Poor</option>\n                              <option value='2'>2 - Fair</option>\n                              <option value='3'>3 - Good</option>\n                              <option value='4'>4 - Very Good</option>\n                              <option value='5'>5 - Excellent</option>\n                            </select>\n                          </li>\n                          <li>\n                            <label htmlFor='comment'>Comment</label>\n                            <textarea name='comment' value={comment} onChange={e => setComment(e.target.value)} />\n                          </li>\n                          <li>\n                            <button type='submit' className='button primary'>\n                              Submit Comment\n                            </button>\n                          </li>\n                        </ul>\n                      </form>\n                    ) : (\n                      <div>\n                        Please <Link to='/signin'>Sign In</Link> to write a review.\n                      </div>\n                    )}\n                  </li>\n                </ul>\n              </div>\n            )}\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default ProductContainer;\n"]},"metadata":{},"sourceType":"module"}